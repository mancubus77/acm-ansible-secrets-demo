---
  - name: Encrypt Variables from input
    hosts: localhost
    gather_facts: no
    vars:
      ocp_token: !vault |
                $ANSIBLE_VAULT;1.1;AES256
                30386465643633373464323163666433356563303530353333363532353662333661343231386235
                3839336431636239366262353563303830336165613133360a356436313731333535623438313738
                62373363633931666430633730613030666361623239393863646130353138333865373931373637
                3934636164333239350a663534363230633161313264663536623339326563373265643561323033
                35663637663565616561373263356465626631623432376234343030363232653538626539386161
                39373835663230346235336533396436346562326435653330306364643462396231303165333666
                36376233653934396136373033393638383131313432343034383834633632313662363033623633
                37636462346634386335623538656363646263303039636133666131356366303334613566663531
                33373334636664326233663032643933323432333932313237363030343637303430326265373236
                66643866356366633464623436626364383130393664326333663834626230396636333561383336
                63396634333436343435383463363431616663366637366266343534373636666232386162303331
                39346232323565633735313832373563366530626639366236616234353239663134616462616163
                62323663663738363231653063316165346638623561343937356661343735393662316665313438
                30626233313535356430663636303761303536643330663433363264373730666361316438343434
                33343462323833616263623637656630303861373736303637326238383762313861356463316235
                63313666386566356330306333633263376536656631656562303562373465323833336133623932
                65653030626131303264626662386563643532613565643537393339623133623634336466633234
                36663833616137666637633065643062373235633532626365376166366466343466353231653337
                31386462643665373363653632616338646661623165643734383338346563323335316463346163
                39613964373636306163386433386362663833393739626634613935306263393566303638353465
                37376365386661313537643230336365313536303462653563316466383764366162323564376334
                30643263323537366232653364366538343632333765353161343436636130376163626265353265
                32306430383064623562376663373938363663346531633265373933323033633431623962333261
                63393666346465656364343063656231623665353038373934306361356139616335396137656461
                62663466346338653534613538376635313437303861396361386263343636303136306563626230
                37613938666263393265393132643062346136643635633464386336303736386166393134333661
                63323235646162353334363565396538636566386561663732633063333938366636343266386666
                30643736663165656365353837656632656637656234366231636339643666303162646435373262
                62306335663866333139656461623334663131303732323338616265666465353238633266646565
                30626664653537363061393732636566383066633830373239333964303464333761656232343338
                32626661646438356339336635626631613936383730386364633437636135393738303634383561
                64653434376266623666663732303264636637623734323939306339393438656231653966323034
                35636362323666336239383534363536366536323862653937366532616134346632623334626337
                34653564386266633062316134303436663761303735383463626236313131666466326565316431
                39643438343038663932643961333639326337623464613065366334343765353965626366666564
                62306463316338376234356438643862636334333739636330333664353065353831636436373431
                64636164316566663937393664356433303038666361323036376662306630333433333838626566
                63386238356538666630336436366466633564663564623366393662303438373866323266623932
                37613633393338353164626536316130663564623065323962613738623731356264343934386234
                38376233623837396436313933343731333866306335653234353737303037613336623531396463
                38303832663335653238366630376337666436353430323264336164306432633437353837643536
                37653435663935323564356665656631646634323934373032643466636163363139363262646264
                63383535643031653866316664316362303236613437643164353466323039363565643538643766
                39643364616234306333323262373964303037393239643265393164303833643132666330626430
                33643362616639343561353630663034623631363137633930373333346565393934633330646335
                66643966376636316566393765633761633938393564343665336634663065356566336363663137
                35333061636562643438616630306663656566303937303130356333613532363030303435383735
                34373133366531303663303663653131343566373936653738376465363665396263616163316464
                36316163303436313465663132353166656431386532623334633732333065373737373530656263
                63623833636463323636366530663362366166363063353366356162666562386136646265353537
                37376130313733333831353332346164376261383461313336363237326562396632316563656133
                38316331303864376235396363623335393534323562336139636333663732303166636138363536
                38643738343435326539633337386237633732616165646431653135663335636532666332356335
                63346335663233646436633636623536643533386431396130353134376234393639623064653836
                62373133633333613032373736653235306530333564383537306338636365343539643466656366
                34636434373364393466393865643230306337343536663532653630353866633363366464396330
                39393563313239313038316165373033383135356332666664336232326561633437373232626562
                37336133353166646666373666333663373130643537616238383364643435666430623435616332
                32366264666566306566343362373066643039653165376665656665633863343363643331396334
                33333038636262356539346634306635666262633438326136356138656462376231336162373564
                65373030373262386566363039646262363334396537396239613333303733666566626462393334
                33303931336563666431356165333834663962323534386239306236346530356238623639383164
                63383963333265316639303636316538643865396539373132646639323634353132663735386139
                36626535353236636130336335643866313839303363663963313230393236383739353561353364
                36326365326339633830623835393339346431303266303030306266653463363834366238356538
                3536393531356630323737363463393436396163303966366137
      vault_enc: !vault |
                $ANSIBLE_VAULT;1.1;AES256
                63643133623031336266346665396161633434663938333738353466313332356531656339383865
                3862336231393234643137343930326438326239373465380a343831366266336235643831333534
                66373431313266363237333931613039623262643762613837353438643230613538333134393065
                6464363134303937380a643130376436383431616565656233643339373034646433343961306239
                3366
      github_key: !vault |
                $ANSIBLE_VAULT;1.1;AES256
                36383735396438363030646137303031343634396164303938333637323431613534396535646465
                3265663430623433396665633531666438366663316565310a653736376464626534363830343539
                35623734616165643062326666313130656531333836633862396566393865303462663932313934
                3436623237626539630a366438653161393164333030663632656665646463656335366230366634
                37633038636138346233323263613039626230336438373435666661643030383862316365663635
                3939366536626365633263623236353464306533303961356466
      acm_git: https://github.com/mancubus77/ansible-secrets-demo_valutvals.git

    tasks:
      - name: Save vault key as string
        set_fact: 
          vault_key: vault_enc
          giturl: "https://{{github_key}}@"
        no_log: true 

      # - name: Encrypt given variables
      #   include_role:
      #     name: encrypt-vars

      - name: Encrypt given variables
        include_role:
          name: apply-policy