---
  - name: Encrypt Variables from input
    hosts: localhost
    gather_facts: no
    vars:
      ocp_token: !vault |
                $ANSIBLE_VAULT;1.1;AES256
                30366334363839353739306535353630626665373331653736326662306633366164613131613065
                3161383463373639366564343333393431373764353434380a613964316535363766326564656630
                32313038373362393539623633623261623734643537653561663432323536323039333539313031
                3965643832396530380a383539656237343131333236373666376462306230363163343730336664
                32646534303465353361633765383733356539313461633631346432333762623437306666373136
                61366565653437376161383335653732396630306462376335383931393533373264346238303436
                63383032363930613132396433306332616238396337663835373833616366393366633863663061
                35613632353635643135356161656363623564366462353036313734376534613532643932623436
                30323634616234303934313335393530343130613661663066643835663137653630303630343566
                31316462633837663366653630333330323661313762323161633331656265336563363166666466
                38626339643366393766653032303134333938353063646536663436343234306663343862646439
                31626637393138313464616636626635376163633837323933613333616166363162663761346165
                38353730363865366333656364326636616538646535316463326235313966333664656335333131
                61316564623834633565663763396538306363643135303163373538343632643430343166303634
                33393037626330666339383936333066643936393835393563633530633030383137396165333566
                39616236616332383235323663343332616361333063393463323066386164643033306139316234
                31336264316666303039316466633331653236363739303534336239643362323033373133643133
                64316336343562373262643637666631346335313730663364343836616633383434333733643335
                38366563636230333338343362393261396134656139336437316536616163643735633265356132
                61333334363065666330383163323066653035633632633832656239363835643939393162386366
                30373438363463663766366166663936643032306634353130346566353766643430363139353236
                66666363636134656664663535326163303930663533326136643934333432396135313336393235
                36343765306539316336386236346339343434366637393733323365626337363561646531653866
                32316264653565663133326362323062336239633339653732646131643830633264623335343762
                37376638356261343763343631656661353436363366653062366331323936313562346138666263
                64636366336465633636323234343863303932336337653665353630306165626135653063613362
                64666338346262633533366465326437633362633332653639616536313930656530363765383035
                31383338663832366566353563666265313666613438646665353038616639626231303235343433
                38643864393237636463393530363736343238633538653138663233333265666664653139393735
                34636331393038633233663063613631373631653237373136666666636262636166396264383365
                37633661383834373262393834313536343330306332343161376238363633303463643331613364
                36373934383031393535316331303966383537386133303462313737363939616464626435316262
                30643833366565376232653730313065306264336332333633353534313838356164313638326633
                32623333623039356462643866373037333661303237656535636535323837343634623038643938
                37306566666230653834373238663735623932363335343861663564356566306566353966326465
                65373932636636616635396464613231623735663363363435633764333661373537386335356131
                39303737613537346563633136316132663132613439393364343436396534613230353361393739
                62643736663761306433663932346565323639333931313538626266343466613234646464326332
                65393037336234393664613736383535326561656166343730306134663664623231643466666630
                30663633376639383661353539623830636263313730396134353637666439316465666565346532
                62663036306563653437386466356563363865333665383230323634663735393332346335623831
                61386531333131376539623930396266346464663230313331663132393830663465326533353235
                32316663343934316562643665343363623735343138363632333161353131343866343365653065
                36393038303239636238393833313334363339373431303065663038373066346265623466386262
                36653463663965646438366566653031343532373666363566633733363933396339306464383237
                31316263623031383737653732663737303732396435636537663639353764636435613532396131
                37396632333662613165613766623662386163353333663836656335373438353165376134376135
                63386336303333363566666364633837663533363464363238376564643531656134363565353137
                39373733366361316662383964353564616431613830363165333036313631643036
      vault_enc: !vault |
                $ANSIBLE_VAULT;1.1;AES256
                63643133623031336266346665396161633434663938333738353466313332356531656339383865
                3862336231393234643137343930326438326239373465380a343831366266336235643831333534
                66373431313266363237333931613039623262643762613837353438643230613538333134393065
                6464363134303937380a643130376436383431616565656233643339373034646433343961306239
                3366
      github_key: !vault |
                $ANSIBLE_VAULT;1.1;AES256
                36383735396438363030646137303031343634396164303938333637323431613534396535646465
                3265663430623433396665633531666438366663316565310a653736376464626534363830343539
                35623734616165643062326666313130656531333836633862396566393865303462663932313934
                3436623237626539630a366438653161393164333030663632656665646463656335366230366634
                37633038636138346233323263613039626230336438373435666661643030383862316365663635
                3939366536626365633263623236353464306533303961356466
      acm_git: https://github.com/mancubus77/ansible-secrets-demo_valutvals.git

    tasks:
      - name: Save vault key as string
        set_fact: 
          vault_key: vault_enc
          giturl: "https://{{github_key}}@"
        no_log: true 

      # - name: Encrypt given variables
      #   include_role:
      #     name: encrypt-vars

      - name: Encrypt given variables
        include_role:
          name: apply-policy